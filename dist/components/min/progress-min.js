!function($,e,t,n){"use strict";e="undefined"!=typeof e&&e.Math==Math?e:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();var r="undefined"!=typeof e&&e.Math==Math?e:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();$.fn.progress=function(e){var r=$(this),a=r.selector||"",o=(new Date).getTime(),i=[],s=arguments[0],l="string"==typeof s,c=[].slice.call(arguments,1),u;return r.each(function(){var r=$.isPlainObject(e)?$.extend(!0,{},$.fn.progress.settings,e):$.extend({},$.fn.progress.settings),d=r.className,g=r.metadata,v=r.namespace,p=r.selector,f=r.error,m="."+v,b="module-"+v,h=$(this),x=$(this).find(p.bar),y=$(this).find(p.progress),w=$(this).find(p.label),V=this,C=h.data(b),E=!1,P,T;T={initialize:function(){T.debug("Initializing progress bar",r),T.set.duration(),T.set.transitionEvent(),T.read.metadata(),T.read.settings(),T.instantiate()},instantiate:function(){T.verbose("Storing instance of progress",T),C=T,h.data(b,T)},destroy:function(){T.verbose("Destroying previous progress for",h),clearInterval(C.interval),T.remove.state(),h.removeData(b),C=n},reset:function(){T.remove.nextValue(),T.update.progress(0)},complete:function(){(T.percent===n||T.percent<100)&&(T.remove.progressPoll(),T.set.percent(100))},read:{metadata:function(){var e={percent:h.data(g.percent),total:h.data(g.total),value:h.data(g.value)};e.percent&&(T.debug("Current percent value set from metadata",e.percent),T.set.percent(e.percent)),e.total&&(T.debug("Total value set from metadata",e.total),T.set.total(e.total)),e.value&&(T.debug("Current value set from metadata",e.value),T.set.value(e.value),T.set.progress(e.value))},settings:function(){r.total!==!1&&(T.debug("Current total set in settings",r.total),T.set.total(r.total)),r.value!==!1&&(T.debug("Current value set in settings",r.value),T.set.value(r.value),T.set.progress(T.value)),r.percent!==!1&&(T.debug("Current percent set in settings",r.percent),T.set.percent(r.percent))}},bind:{transitionEnd:function(e){var t=T.get.transitionEnd();x.one(t+m,function(t){clearTimeout(T.failSafeTimer),e.call(this,t)}),T.failSafeTimer=setTimeout(function(){x.triggerHandler(t)},r.duration+r.failSafeDelay),T.verbose("Adding fail safe timer",T.timer)}},increment:function(e){var t,n,r;T.has.total()?(n=T.get.value(),e=e||1,r=n+e):(n=T.get.percent(),e=e||T.get.randomValue(),r=n+e,t=100,T.debug("Incrementing percentage by",n,r)),r=T.get.normalizedValue(r),T.set.progress(r)},decrement:function(e){var t=T.get.total(),n,r;t?(n=T.get.value(),e=e||1,r=n-e,T.debug("Decrementing value by",e,n)):(n=T.get.percent(),e=e||T.get.randomValue(),r=n-e,T.debug("Decrementing percentage by",e,n)),r=T.get.normalizedValue(r),T.set.progress(r)},has:{progressPoll:function(){return T.progressPoll},total:function(){return T.get.total()!==!1}},get:{text:function(e){var t=T.value||0,n=T.total||0,r=E?T.get.displayPercent():T.percent||0,a=T.total>0?n-t:100-r;return e=e||"",e=e.replace("{value}",t).replace("{total}",n).replace("{left}",a).replace("{percent}",r),T.verbose("Adding variables to progress bar text",e),e},normalizedValue:function(e){if(e<0)return T.debug("Value cannot decrement below 0"),0;if(T.has.total()){if(e>T.total)return T.debug("Value cannot increment above total",T.total),T.total}else if(e>100)return T.debug("Value cannot increment above 100 percent"),100;return e},updateInterval:function(){return"auto"==r.updateInterval?r.duration:r.updateInterval},randomValue:function(){return T.debug("Generating random increment percentage"),Math.floor(Math.random()*r.random.max+r.random.min)},numericValue:function(e){return"string"==typeof e?""!==e.replace(/[^\d.]/g,"")&&+e.replace(/[^\d.]/g,""):e},transitionEnd:function(){var e=t.createElement("element"),r={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"},a;for(a in r)if(e.style[a]!==n)return r[a]},displayPercent:function(){var e=x.width(),t=h.width(),n=parseInt(x.css("min-width"),10),a=e>n?e/t*100:T.percent;return r.precision>0?Math.round(a*(10*r.precision))/(10*r.precision):Math.round(a)},percent:function(){return T.percent||0},value:function(){return T.nextValue||T.value||0},total:function(){return T.total||!1}},create:{progressPoll:function(){T.progressPoll=setTimeout(function(){T.update.toNextValue(),T.remove.progressPoll()},T.get.updateInterval())}},is:{complete:function(){return T.is.success()||T.is.warning()||T.is.error()},success:function(){return h.hasClass(d.success)},warning:function(){return h.hasClass(d.warning)},error:function(){return h.hasClass(d.error)},active:function(){return h.hasClass(d.active)},visible:function(){return h.is(":visible")}},remove:{progressPoll:function(){T.verbose("Removing progress poll timer"),T.progressPoll&&(clearTimeout(T.progressPoll),delete T.progressPoll)},nextValue:function(){T.verbose("Removing progress value stored for next update"),delete T.nextValue},state:function(){T.verbose("Removing stored state"),delete T.total,delete T.percent,delete T.value},active:function(){T.verbose("Removing active state"),h.removeClass(d.active)},success:function(){T.verbose("Removing success state"),h.removeClass(d.success)},warning:function(){T.verbose("Removing warning state"),h.removeClass(d.warning)},error:function(){T.verbose("Removing error state"),h.removeClass(d.error)}},set:{barWidth:function(e){e>100?T.error(f.tooHigh,e):e<0?T.error(f.tooLow,e):(x.css("width",e+"%"),h.attr("data-percent",parseInt(e,10)))},duration:function(e){e=e||r.duration,e="number"==typeof e?e+"ms":e,T.verbose("Setting progress bar transition duration",e),x.css({"transition-duration":e})},percent:function(e){e="string"==typeof e?+e.replace("%",""):e,e=r.precision>0?Math.round(e*(10*r.precision))/(10*r.precision):Math.round(e),T.percent=e,T.has.total()||(T.value=r.precision>0?Math.round(e/100*T.total*(10*r.precision))/(10*r.precision):Math.round(e/100*T.total*10)/10,r.limitValues&&(T.value=T.value>100?100:T.value<0?0:T.value)),T.set.barWidth(e),T.set.labelInterval(),T.set.labels(),r.onChange.call(V,e,T.value,T.total)},labelInterval:function(){var e=function(){T.verbose("Bar finished animating, removing continuous label updates"),clearInterval(T.interval),E=!1,T.set.labels()};clearInterval(T.interval),T.bind.transitionEnd(e),E=!0,T.interval=setInterval(function(){var e=$.contains(t.documentElement,V);e||(clearInterval(T.interval),E=!1),T.set.labels()},r.framerate)},labels:function(){T.verbose("Setting both bar progress and outer label text"),T.set.barLabel(),T.set.state()},label:function(e){e=e||"",e&&(e=T.get.text(e),T.verbose("Setting label to text",e),w.text(e))},state:function(e){e=e!==n?e:T.percent,100===e?r.autoSuccess&&!(T.is.warning()||T.is.error()||T.is.success())?(T.set.success(),T.debug("Automatically triggering success at 100%")):(T.verbose("Reached 100% removing active state"),T.remove.active(),T.remove.progressPoll()):e>0?(T.verbose("Adjusting active progress bar label",e),T.set.active()):(T.remove.active(),T.set.label(r.text.active))},barLabel:function(e){e!==n?y.text(T.get.text(e)):"ratio"==r.label&&T.total?(T.verbose("Adding ratio to bar label"),y.text(T.get.text(r.text.ratio))):"percent"==r.label&&(T.verbose("Adding percentage to bar label"),y.text(T.get.text(r.text.percent)))},active:function(e){e=e||r.text.active,T.debug("Setting active state"),r.showActivity&&!T.is.active()&&h.addClass(d.active),T.remove.warning(),T.remove.error(),T.remove.success(),e=r.onLabelUpdate("active",e,T.value,T.total),e&&T.set.label(e),T.bind.transitionEnd(function(){r.onActive.call(V,T.value,T.total)})},success:function(e){e=e||r.text.success||r.text.active,T.debug("Setting success state"),h.addClass(d.success),T.remove.active(),T.remove.warning(),T.remove.error(),T.complete(),r.text.success?(e=r.onLabelUpdate("success",e,T.value,T.total),T.set.label(e)):(e=r.onLabelUpdate("active",e,T.value,T.total),T.set.label(e)),T.bind.transitionEnd(function(){r.onSuccess.call(V,T.total)})},warning:function(e){e=e||r.text.warning,T.debug("Setting warning state"),h.addClass(d.warning),T.remove.active(),T.remove.success(),T.remove.error(),T.complete(),e=r.onLabelUpdate("warning",e,T.value,T.total),e&&T.set.label(e),T.bind.transitionEnd(function(){r.onWarning.call(V,T.value,T.total)})},error:function(e){e=e||r.text.error,T.debug("Setting error state"),h.addClass(d.error),T.remove.active(),T.remove.success(),T.remove.warning(),T.complete(),e=r.onLabelUpdate("error",e,T.value,T.total),e&&T.set.label(e),T.bind.transitionEnd(function(){r.onError.call(V,T.value,T.total)})},transitionEvent:function(){P=T.get.transitionEnd()},total:function(e){T.total=e},value:function(e){T.value=e},progress:function(e){T.has.progressPoll()?(T.debug("Updated within interval, setting next update to use new value",e),T.set.nextValue(e)):(T.debug("First update in progress update interval, immediately updating",e),T.update.progress(e),T.create.progressPoll())},nextValue:function(e){T.nextValue=e}},update:{toNextValue:function(){var e=T.nextValue;e&&(T.debug("Update interval complete using last updated value",e),T.update.progress(e),T.remove.nextValue())},progress:function(e){var t;e=T.get.numericValue(e),e===!1&&T.error(f.nonNumeric,e),e=T.get.normalizedValue(e),T.has.total()?(T.set.value(e),t=e/T.total*100,T.debug("Calculating percent complete from total",t),T.set.percent(t)):(t=e,T.debug("Setting value to exact percentage value",t),T.set.percent(t))}},setting:function(e,t){if(T.debug("Changing setting",e,t),$.isPlainObject(e))$.extend(!0,r,e);else{if(t===n)return r[e];$.isPlainObject(r[e])?$.extend(!0,r[e],t):r[e]=t}},internal:function(e,t){if($.isPlainObject(e))$.extend(!0,T,e);else{if(t===n)return T[e];T[e]=t}},debug:function(){!r.silent&&r.debug&&(r.performance?T.performance.log(arguments):(T.debug=Function.prototype.bind.call(console.info,console,r.name+":"),T.debug.apply(console,arguments)))},verbose:function(){!r.silent&&r.verbose&&r.debug&&(r.performance?T.performance.log(arguments):(T.verbose=Function.prototype.bind.call(console.info,console,r.name+":"),T.verbose.apply(console,arguments)))},error:function(){r.silent||(T.error=Function.prototype.bind.call(console.error,console,r.name+":"),T.error.apply(console,arguments))},performance:{log:function(e){var t,n,a;r.performance&&(t=(new Date).getTime(),a=o||t,n=t-a,o=t,i.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:V,"Execution Time":n})),clearTimeout(T.performance.timer),T.performance.timer=setTimeout(T.performance.display,500)},display:function(){var e=r.name+":",t=0;o=!1,clearTimeout(T.performance.timer),$.each(i,function(e,n){t+=n["Execution Time"]}),e+=" "+t+"ms",a&&(e+=" '"+a+"'"),(console.group!==n||console.table!==n)&&i.length>0&&(console.groupCollapsed(e),console.table?console.table(i):$.each(i,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),i=[]}},invoke:function(e,t,r){var a=C,o,i,s;return t=t||c,r=V||r,"string"==typeof e&&a!==n&&(e=e.split(/[\. ]/),o=e.length-1,$.each(e,function(t,r){var s=t!=o?r+e[t+1].charAt(0).toUpperCase()+e[t+1].slice(1):e;if($.isPlainObject(a[s])&&t!=o)a=a[s];else{if(a[s]!==n)return i=a[s],!1;if(!$.isPlainObject(a[r])||t==o)return a[r]!==n?(i=a[r],!1):(T.error(f.method,e),!1);a=a[r]}})),$.isFunction(i)?s=i.apply(r,t):i!==n&&(s=i),$.isArray(u)?u.push(s):u!==n?u=[u,s]:s!==n&&(u=s),i}},l?(C===n&&T.initialize(),T.invoke(s)):(C!==n&&C.invoke("destroy"),T.initialize())}),u!==n?u:this},$.fn.progress.settings={name:"Progress",namespace:"progress",silent:!1,debug:!1,verbose:!1,performance:!0,random:{min:2,max:5},duration:300,updateInterval:"auto",autoSuccess:!0,showActivity:!0,limitValues:!0,label:"percent",precision:0,framerate:1e3/30,percent:!1,total:!1,value:!1,failSafeDelay:100,onLabelUpdate:function(e,t,n,r){return t},onChange:function(e,t,n){},onSuccess:function(e){},onActive:function(e,t){},onError:function(e,t){},onWarning:function(e,t){},error:{method:"The method you called is not defined.",nonNumeric:"Progress value is non numeric",tooHigh:"Value specified is above 100%",tooLow:"Value specified is below 0%"},regExp:{variable:/\{\$*[A-z0-9]+\}/g},metadata:{percent:"percent",total:"total",value:"value"},selector:{bar:"> .bar",label:"> .label",progress:".bar > .progress"},text:{active:!1,error:!1,success:!1,warning:!1,percent:"{percent}%",ratio:"{value} of {total}"},className:{active:"active",error:"error",success:"success",warning:"warning"}}}(jQuery,window,document);